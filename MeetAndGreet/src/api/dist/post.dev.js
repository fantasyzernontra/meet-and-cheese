"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _api=_interopRequireDefault(require("../api"));var _default={getSelfPosts:function getSelfPosts(username){var res;return _regenerator["default"].async(function getSelfPosts$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regenerator["default"].awrap(_api["default"].get("/posts?user.username=".concat(username)));case 2:res=_context.sent;if(!res){_context.next=5;break;}return _context.abrupt("return",res);case 5:case"end":return _context.stop();}}});},getAllPosts:function getAllPosts(){var res;return _regenerator["default"].async(function getAllPosts$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regenerator["default"].awrap(_api["default"].get('/posts?_sort=createdAt:DESC'));case 2:res=_context2.sent;if(!res){_context2.next=5;break;}return _context2.abrupt("return",res);case 5:case"end":return _context2.stop();}}});},getOnePost:function getOnePost(post_id){var res;return _regenerator["default"].async(function getOnePost$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _regenerator["default"].awrap(_api["default"].get("/posts/".concat(post_id)));case 2:res=_context3.sent;if(!res){_context3.next=5;break;}return _context3.abrupt("return",res);case 5:case"end":return _context3.stop();}}});},createPost:function createPost(pic,title,captions,account_id){var form,picRes,body,res;return _regenerator["default"].async(function createPost$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:form=new FormData();form.append('files',{uri:pic.uri.replace('file://',''),type:pic.type,name:pic.fileName},pic.fileName);_context4.next=4;return _regenerator["default"].awrap(_api["default"].post('/upload',form,{headers:{'Content-Type':'multipart/form-data'}}));case 4:picRes=_context4.sent;body={user:account_id,picture:picRes.data[0].id,title:title,captions:captions};_context4.next=8;return _regenerator["default"].awrap(_api["default"].post('/posts',body));case 8:res=_context4.sent;if(!res){_context4.next=11;break;}return _context4.abrupt("return",res);case 11:case"end":return _context4.stop();}}});}};exports["default"]=_default;