"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativeSafeAreaContext=require("react-native-safe-area-context");var _blur=require("@react-native-community/blur");var _AntDesign=_interopRequireDefault(require("react-native-vector-icons/AntDesign"));var _MaterialCommunityIcons=_interopRequireDefault(require("react-native-vector-icons/MaterialCommunityIcons"));var _path=_interopRequireDefault(require("../../api/path"));var _strapiRole=_interopRequireDefault(require("../../data/strapi-role"));var _user_type=_interopRequireDefault(require("../../data/user_type"));var _photographer=_interopRequireDefault(require("../../assets/images/photographer.jpeg"));var _constant=require("../../constant");var _this=void 0,_jsxFileName="/Users/nonnontra/Desktop/Programming/On-Working/meet-and-cheese/MeetAndGreet/src/screens/auth/signup.js";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){(0,_defineProperty2["default"])(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var SignUp=function SignUp(_ref){var navigation=_ref.navigation;var _useState=(0,_react.useState)({username:'',email:'',password:'',firstname:'',lastname:'',role:{_id:_strapiRole["default"]["public"]},biography:'',gender:'M',user_type:{_id:_user_type["default"].user}}),_useState2=(0,_slicedToArray2["default"])(_useState,2),info=_useState2[0],setInfo=_useState2[1];var _useState3=(0,_react.useState)(''),_useState4=(0,_slicedToArray2["default"])(_useState3,2),errMessage=_useState4[0],setErrMessage=_useState4[1];var _useState5=(0,_react.useState)(false),_useState6=(0,_slicedToArray2["default"])(_useState5,2),pending=_useState6[0],setPending=_useState6[1];var _useState7=(0,_react.useState)(true),_useState8=(0,_slicedToArray2["default"])(_useState7,2),validated=_useState8[0],setValidated=_useState8[1];var onFill=function onFill(name,value){setInfo(_objectSpread({},info,(0,_defineProperty2["default"])({},name,value)));};var onSignUp=function onSignUp(){var res;return _regenerator["default"].async(function onSignUp$(_context){while(1){switch(_context.prev=_context.next){case 0:setPending(true);_context.next=3;return _regenerator["default"].awrap(_path["default"].profile.signup(info));case 3:res=_context.sent;if(res){if(res.status===200)navigation.navigate('Login');else if(res.response.status===400)setErrMessage('Sign Up is insuccess. Please try again.');setPending(false);}case 5:case"end":return _context.stop();}}});};(0,_react.useEffect)(function(){if(info.email.length!==0&&info.firstname.length!==0&&info.lastname.length!==0&&info.password.length!==0&&info.username.length!==0)setValidated(false);else setValidated(true);},[info]);if(pending)return _react["default"].createElement(_reactNative.View,{style:{alignItems:'center',justifyContent:'center',flex:1},__self:_this,__source:{fileName:_jsxFileName,lineNumber:78,columnNumber:7}},_react["default"].createElement(_reactNative.ActivityIndicator,{color:"blue",size:"large",__self:_this,__source:{fileName:_jsxFileName,lineNumber:79,columnNumber:9}}));return _react["default"].createElement(_reactNativeSafeAreaContext.SafeAreaView,{style:styles.safeAreaContainer,__self:_this,__source:{fileName:_jsxFileName,lineNumber:84,columnNumber:5}},_react["default"].createElement(_reactNative.ImageBackground,{source:_photographer["default"],style:styles.content_container,resizeMode:"cover",imageStyle:{opacity:0.3},__self:_this,__source:{fileName:_jsxFileName,lineNumber:85,columnNumber:7}},_react["default"].createElement(_reactNative.TouchableOpacity,{style:styles.back_container,activeOpacity:0.2,onPress:function onPress(){navigation.goBack();},__self:_this,__source:{fileName:_jsxFileName,lineNumber:92,columnNumber:9}},_react["default"].createElement(_AntDesign["default"],{name:"left",color:"#fff",size:25,__self:_this,__source:{fileName:_jsxFileName,lineNumber:98,columnNumber:11}})),_react["default"].createElement(_reactNative.Text,{style:styles.title,__self:_this,__source:{fileName:_jsxFileName,lineNumber:100,columnNumber:9}},"Create",'\n',"an account"),_react["default"].createElement(_reactNative.TouchableOpacity,{style:styles.have_an_account_container,__self:_this,__source:{fileName:_jsxFileName,lineNumber:101,columnNumber:9}},_react["default"].createElement(_reactNative.Text,{style:styles.have_an_account,onPress:function onPress(){return navigation.navigate('PhotographerSignup');},__self:_this,__source:{fileName:_jsxFileName,lineNumber:102,columnNumber:11}},"Are you a photographer? Sign Up Here")),_react["default"].createElement(_blur.BlurView,{blurRadius:1,blurType:"light",style:styles.field_container,__self:_this,__source:{fileName:_jsxFileName,lineNumber:108,columnNumber:9}},_react["default"].createElement(_reactNative.ScrollView,{showsVerticalScrollIndicator:false,__self:_this,__source:{fileName:_jsxFileName,lineNumber:112,columnNumber:11}},_react["default"].createElement(_reactNative.Text,{style:styles.input_label,__self:_this,__source:{fileName:_jsxFileName,lineNumber:113,columnNumber:13}},"Email"),_react["default"].createElement(_reactNative.View,{style:styles.inputSection,__self:_this,__source:{fileName:_jsxFileName,lineNumber:114,columnNumber:13}},_react["default"].createElement(_MaterialCommunityIcons["default"],{name:"email",color:"#c9c9c9",size:25,style:{position:'absolute',zIndex:1,left:10,justifyContent:'flex-start'},__self:_this,__source:{fileName:_jsxFileName,lineNumber:115,columnNumber:15}}),_react["default"].createElement(_reactNative.TextInput,{placeholder:"Email",style:styles.input,selectionColor:"#64bfa4",autoCorrect:false,autoCapitalize:"none",onChangeText:function onChangeText(val){return onFill('email',val);},value:info.email,__self:_this,__source:{fileName:_jsxFileName,lineNumber:126,columnNumber:15}})),_react["default"].createElement(_reactNative.Text,{style:styles.input_label,__self:_this,__source:{fileName:_jsxFileName,lineNumber:136,columnNumber:13}},"Username"),_react["default"].createElement(_reactNative.View,{style:styles.inputSection,__self:_this,__source:{fileName:_jsxFileName,lineNumber:137,columnNumber:13}},_react["default"].createElement(_MaterialCommunityIcons["default"],{name:"account",color:"#c9c9c9",size:25,style:{position:'absolute',zIndex:1,left:10,justifyContent:'flex-start'},__self:_this,__source:{fileName:_jsxFileName,lineNumber:138,columnNumber:15}}),_react["default"].createElement(_reactNative.TextInput,{placeholder:"Username",style:styles.input,selectionColor:"#64bfa4",autoCorrect:false,autoCapitalize:"none",onChangeText:function onChangeText(val){return onFill('username',val);},value:info.username,__self:_this,__source:{fileName:_jsxFileName,lineNumber:149,columnNumber:15}})),_react["default"].createElement(_reactNative.Text,{style:styles.input_label,__self:_this,__source:{fileName:_jsxFileName,lineNumber:159,columnNumber:13}},"Password"),_react["default"].createElement(_reactNative.View,{style:styles.inputSection,__self:_this,__source:{fileName:_jsxFileName,lineNumber:160,columnNumber:13}},_react["default"].createElement(_MaterialCommunityIcons["default"],{name:"lock",color:"#c9c9c9",size:25,style:{position:'absolute',zIndex:1,left:10,justifyContent:'flex-start'},__self:_this,__source:{fileName:_jsxFileName,lineNumber:161,columnNumber:15}}),_react["default"].createElement(_reactNative.TextInput,{placeholder:"Password",style:styles.input,selectionColor:"#64bfa4",autoCorrect:false,autoCapitalize:"none",onChangeText:function onChangeText(val){return onFill('password',val);},value:info.password,__self:_this,__source:{fileName:_jsxFileName,lineNumber:172,columnNumber:15}})),_react["default"].createElement(_reactNative.Text,{style:styles.input_label,__self:_this,__source:{fileName:_jsxFileName,lineNumber:182,columnNumber:13}},"First Name"),_react["default"].createElement(_reactNative.View,{style:styles.inputSection,__self:_this,__source:{fileName:_jsxFileName,lineNumber:183,columnNumber:13}},_react["default"].createElement(_MaterialCommunityIcons["default"],{name:"comment-edit",color:"#c9c9c9",size:25,style:{position:'absolute',zIndex:1,left:10,justifyContent:'flex-start'},__self:_this,__source:{fileName:_jsxFileName,lineNumber:184,columnNumber:15}}),_react["default"].createElement(_reactNative.TextInput,{placeholder:"Firstname",style:styles.input,selectionColor:"#64bfa4",autoCorrect:false,autoCapitalize:"none",onChangeText:function onChangeText(val){return onFill('firstname',val);},value:info.firstname,__self:_this,__source:{fileName:_jsxFileName,lineNumber:195,columnNumber:15}})),_react["default"].createElement(_reactNative.Text,{style:styles.input_label,__self:_this,__source:{fileName:_jsxFileName,lineNumber:205,columnNumber:13}},"Last Name"),_react["default"].createElement(_reactNative.View,{style:styles.inputSection,__self:_this,__source:{fileName:_jsxFileName,lineNumber:206,columnNumber:13}},_react["default"].createElement(_MaterialCommunityIcons["default"],{name:"comment-edit",color:"#c9c9c9",size:25,style:{position:'absolute',zIndex:1,left:10,justifyContent:'flex-start'},__self:_this,__source:{fileName:_jsxFileName,lineNumber:207,columnNumber:15}}),_react["default"].createElement(_reactNative.TextInput,{placeholder:"Lastname",style:styles.input,selectionColor:"#64bfa4",autoCorrect:false,autoCapitalize:"none",onChangeText:function onChangeText(val){return onFill('lastname',val);},value:info.lastname,__self:_this,__source:{fileName:_jsxFileName,lineNumber:218,columnNumber:15}})),_react["default"].createElement(_reactNative.Text,{style:styles.err_message,__self:_this,__source:{fileName:_jsxFileName,lineNumber:228,columnNumber:13}},errMessage),_react["default"].createElement(_reactNative.TouchableOpacity,{disabled:validated,onPress:onSignUp,activeOpacity:0.8,__self:_this,__source:{fileName:_jsxFileName,lineNumber:229,columnNumber:13}},_react["default"].createElement(_reactNative.View,{style:validated?styles.inactive_signup_button:styles.active_signup_button,__self:_this,__source:{fileName:_jsxFileName,lineNumber:233,columnNumber:15}},_react["default"].createElement(_reactNative.Text,{style:styles.signup_text,__self:_this,__source:{fileName:_jsxFileName,lineNumber:239,columnNumber:17}},"Sign Up"))),_react["default"].createElement(_reactNative.View,{style:{height:150},__self:_this,__source:{fileName:_jsxFileName,lineNumber:242,columnNumber:13}})))));};var styles=_reactNative.StyleSheet.create({safeAreaContainer:{flex:1},content_container:{flex:1,backgroundColor:'#000',padding:20,alignItems:'center'},title:{fontFamily:'NanumGothic',color:_constant.WHITE_TEXT_COLOR,fontWeight:'500',fontSize:42,textAlign:'left',alignSelf:'flex-start',marginTop:20},have_an_account_container:{alignSelf:'flex-start',marginTop:15},have_an_account:{fontFamily:'NanumGothic',textDecorationLine:'underline',color:'#fff'},photographer_signup_container:{alignSelf:'center',marginTop:25},photographer_signup:{fontFamily:'NanumGothic',textDecorationLine:'underline',color:'#fff'},field_container:{height:_reactNative.Dimensions.get('screen').height*0.75,width:_reactNative.Dimensions.get('screen').width,bottom:-40,borderRadius:30},inputSection:{flexDirection:'row',alignItems:'center',height:50,marginVertical:10,width:_reactNative.Dimensions.get('screen').width*0.8,alignSelf:'center'},input:{flex:1,padding:10,paddingLeft:40,paddingHorizontal:20,height:50,backgroundColor:'#fff',borderRadius:20,fontFamily:'NanumGothic'},input_label:{fontFamily:'NanumGothic',color:'#fff',width:_reactNative.Dimensions.get('screen').width*0.8,alignSelf:'center',marginTop:20},active_signup_button:{width:'80%',height:48,borderRadius:20,backgroundColor:_constant.SECONDARY_COLOR,marginTop:25,justifyContent:'center',alignItems:'center',alignSelf:'center'},inactive_signup_button:{width:'80%',height:48,borderRadius:20,backgroundColor:'grey',marginTop:25,justifyContent:'center',alignItems:'center',alignSelf:'center'},signup_text:{fontFamily:'NanumGothic',color:_constant.WHITE_TEXT_COLOR,fontSize:16,fontWeight:'500'},err_message:{fontFamily:'NanumGothic',color:_constant.ERROR_COLOR,textAlign:'center',elevation:5},back_container:{alignSelf:'flex-start',flexDirection:'row',alignItems:'center'},back_text:{fontFamily:'NanumGothic',paddingLeft:10}});var _default=SignUp;exports["default"]=_default;